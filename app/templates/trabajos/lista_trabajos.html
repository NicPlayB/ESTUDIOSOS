<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trabajos - {{ clase.nombre }}</title>
</head>

<body>

    <!-- ===== MENÚ ===== -->
    <nav>
        <h3>Menú</h3>

        <a href="{% url 'clases_activas' %}">Clases activas</a><br>

        <a href="{% url 'ver_trabajos' clase.id_clase %}">Trabajos</a><br>

        <a href="{% url 'inscritos_clase' clase.id_clase %}">Inscritos</a><br>

        <a href="{% url 'clases_virtuales' clase.id_clase %}">Clases virtuales</a><br>

        <a href="{% url 'comentarios_clase' clase.id_clase %}">Comentarios</a>
    </nav>

    <hr>

    <!-- ===== HEADER ===== -->
    <h1>Trabajos - {{ clase.nombre }}</h1>
    <p><strong>Código:</strong> {{ clase.codigo_clase }}</p>

    {% if clase.usuario == request.usuario %}
        <p>
            <a href="{% url 'crear_trabajo' clase.id_clase %}">
                Crear trabajo
            </a>
        </p>
    {% endif %}

    <hr>

    <!-- ===== MENSAJES ===== -->
    {% if messages %}
        {% for message in messages %}
            <p>
                <strong>{{ message.tags|upper }}:</strong>
                {{ message }}
            </p>
        {% endfor %}
    {% endif %}

    <hr>

    <!-- ===== LISTA DE TRABAJOS ===== -->
    <h2>Lista de trabajos</h2>

    {% if trabajos %}
        {% for trabajo in trabajos %}

            <div>
                <h3>{{ trabajo.descripcion }}</h3>

                <p>
                    <strong>Estado:</strong> {{ trabajo.estado }}
                </p>

                <p>
                    <strong>ID:</strong> {{ trabajo.id_trabajos }}
                </p>

                <p>
                    <strong>Fecha de creación:</strong>
                    {{ trabajo.fecha_creacion|date:"d/m/Y H:i" }}
                </p>

                <p>
                    <strong>Fecha de entrega:</strong>
                    {{ trabajo.fecha_entrega|date:"d/m/Y" }}
                </p>

                <p>
                    <a href="{% url 'detalle_trabajo' trabajo.id_trabajos %}">
                        Ver detalles
                    </a>
                </p>
            </div>

            <hr>

        {% endfor %}
    {% else %}
        <p>No hay trabajos disponibles para esta clase.</p>
    {% endif %}

</body>
</html>
